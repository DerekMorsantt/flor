<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Flor Animada</title>
  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;

    const numPetalos = 16;   // pétalos por flor
    const numLayers = 50;   // cuántos pétalos simultáneos en animación
    const maxSize = 250;    // tamaño máximo antes de reiniciar
    let layers = [];

    // Crear capas iniciales (todas pequeñas)
    for (let i = 0; i < numLayers; i++) {
      layers.push({
        size: 0,
        hue: Math.random() * 360,
        angle: Math.random() * Math.PI * 2,
        speed: 0.4 + Math.random() * 0.3 // velocidad distinta
      });
    }

    // Dibuja un pétalo con borde
    function dibujaPetalo(size) {
      ctx.beginPath();
      ctx.ellipse(0, size, size / 4, size, 0, 0, Math.PI * 2);
      ctx.stroke();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(centerX, centerY);

      // Ordenar por tamaño (para efecto de profundidad)
      layers.sort((a, b) => a.size - b.size);

      for (let layer of layers) {
        ctx.save();
        ctx.rotate(layer.angle + Date.now() * 0.0003);

        for (let i = 0; i < numPetalos; i++) {
          ctx.save();
          ctx.rotate((Math.PI * 2 / numPetalos) * i);

          ctx.strokeStyle = `hsl(${layer.hue}, 100%, 50%)`;
          ctx.lineWidth = 1.5;
          dibujaPetalo(layer.size);

          ctx.restore();
        }

        ctx.restore();

        // crecimiento
        layer.size += layer.speed;
        layer.hue = (layer.hue + 1) % 360;

        // reiniciar cuando ya es muy grande
        if (layer.size > maxSize) {
          layer.size = 0;
          layer.hue = Math.random() * 360;
          layer.angle = Math.random() * Math.PI * 2;
        }
      }

      ctx.restore();
      requestAnimationFrame(draw);
    }

    draw();
  </script>
</body>
</html>
